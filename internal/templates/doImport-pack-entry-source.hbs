exports.doImport = function (depBundleName, moduleName) {
    var entryModule = require('@jenkins-cd/js-modules').requireModule(depBundleName);
    if (!entryModule) {
        throw new Error('Unexpected bundle module loading error. Bundle ' + depBundleName + ' not preloaded.');
    }
    if (moduleName) {
        var internalRequireFunc = entryModule.{{internalRequireFuncName}};
        if (internalRequireFunc) {
            var internalModule = internalRequireFunc(moduleName);
            if (!internalModule) {
                throw new Error('Unexpected bundle module loading error. Loaded bundle for '
                    + depBundleName + ' does not have an internal module named '
                    + moduleName + '.');
            }
            return internalModule;
        }
    }
    if (entryModule.{{entryModulePropName}}) {
        return entryModule.{{entryModulePropName}};
    } else {
        return entryModule;
    }
};