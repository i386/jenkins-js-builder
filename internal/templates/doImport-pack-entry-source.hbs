exports.doImport = function (depBundleName, moduleName) {
    var entryModule = require('@jenkins-cd/js-modules').requireModule(depBundleName);
    if (moduleName) {
        var internalRequireFunc = entryModule.{{internalRequireFuncName}};
        if (internalRequireFunc) {
            var internalModule = internalRequireFunc(moduleName);
            if (!internalModule) {
                throw new Error('Unexpected bundle module loading error. Loaded bundle for '
                    + depBundleName + ' does not have an internal module named '
                    + moduleName + '.');
            }
            return internalModule;
        } else {
            throw new Error('Unexpected bundle module loading error. Loaded bundle for '
                + depBundleName + ' does not have an internal require function needed to load '
                + moduleName + '.');
        }
    } else {
        if (entryModule.{{entryModulePropName}}) {
            return entryModule.{{entryModulePropName}};
        } else {
            return entryModule;
        }
    }
};